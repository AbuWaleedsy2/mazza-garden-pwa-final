# تطبيق إدارة مشروع حديقة المزة (PWA)

## الاستخدام السريع
1) افتح التطبيق في المتصفح (أو ثبِّته كتطبيق PWA).
2) من الشريط السفلي اذهب إلى **الإعدادات** واضبط:
   - اسم المشروع.
   - اسم المُدخل (التوقيع).
   - تاريخ بدء المشروع والمدة (افتراضي 45 يوم).
   - حد السجل (افتراضي 200 لكل نوع).
   - (اختياري) رابط Webhook لـ **Google Docs** مع رمز التوكن لتمكين إنشاء مستند لكل تقرير.
   - (اختياري) رابط Webhook لـ **Google Sheets** إذا رغبت بحفظ البيانات في جداول.
3) املأ النماذج حسب الحاجة:
   - **اليوم**: تقرير يومي (التاريخ، الطقس، عدد العمال/المهندسين، بنود تنفيذية، أعمال إدارية/تنسيقية، ملاحظات، المرسل).
   - **الغد**: خطة الغد (تاريخ الخطة، الوقت والمدة التقديرية، البنود المخططة، هل يحتاج حضور مدير المشروع، ملاحظات، المرسل).
   - **المواد**: طلب اعتماد مواد (تاريخ، حالة الطلب، الفئة الرئيسية/الفرعية/النشاط، وصف المادة، المورد، الملاحظات، المرسل).
   - **NCR**: عدم مطابقة (يولد رقم NCR تلقائياً، يشتمل على خطورة، الفئة/الخطوة، وصف المخالفة، إجراء تصحيحي، المهلة، مرفق صورة اختياري، المرسل).
   - **الفحص**: طلب فحص (تاريخ/وقت، هل يحتاج حضور المدير، نوع الفحص، الموقع، الوصف، المرسل).
4) اضغط “توليد” في أي نموذج لعرض النص الجاهز. تستطيع بعدها:
   - مشاركة النص عبر النظام (Web Share) أو WhatsApp.
   - نسخ النص إلى الحافظة.
   - تنزيل ملف TXT.
   - طباعة/حفظ PDF عبر قالب طباعة منسق.
   - حفظ التقرير بالسجل المحلي.
   - إنشاء مستند Google Doc للتقرير (يتطلب ضبط Webhook وToken في الإعدادات).
5) استخدم **السجل** لعرض التقارير المحفوظة، البحث، الفلترة، تصدير JSON، أو إعادة إرسال التقرير إلى Google Doc/Sheet.

## تثبيت كتطبيق (PWA)
- **Android (Chrome):** من قائمة المتصفح → **Add to Home screen**.
- **iPhone (Safari):** زر المشاركة → **Add to Home Screen**.

ملاحظة: في بعض الأحيان متصفح واتساب الداخلي لا يظهر خيار التثبيت. افتح الرابط في Chrome/Safari مباشرة.

## ملاحظات أخرى
- التطبيق يعمل بدون إنترنت بعد أول تحميل (Cache‑first). عند ظهور تحديث جديد سيظهر لك إشعار يسمح بإعادة تحميل التطبيق للحصول على التحديث.
- إذا فشل إرسال التقرير إلى Google Doc (أو كنت Offline)، سيتم حفظه في قائمة انتظار. عند عودة الاتصال يمكنك إعادة المحاولة من شاشة التقرير أو سيقوم التطبيق بإعادة المحاولة تلقائياً.
